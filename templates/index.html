<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–º–µ—à–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π</title>
    
    <!-- –ò–ö–û–ù–ö–ê -->
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='apple-touch-icon.png') }}">
    
    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- –ú–µ—Ç–∞-—Ç–µ–≥–∏ -->
    <meta name="description" content="–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Å–º–µ—à–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π">
    <meta name="keywords" content="–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä, —Å–º–µ—à–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫, –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞">
</head>
<body>
    <div class="container">
        <h1><span class="emoji">üé≠</span> –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–º–µ—à–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π</h1>
        <p class="subtitle">–ö–∞–∂–¥–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–µ—Ä–Ω–æ!</p>
        
        <div class="card">
            <div id="sentence" class="sentence">
                –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏...
            </div>
            <div id="words" class="words" style="display: none;">
                <strong>–ò—Å—Ö–æ–¥–Ω—ã–µ —Å–ª–æ–≤–∞:</strong>
                <div id="word-list"></div>
            </div>
        </div>
        
        <div class="buttons">
            <button id="generate-btn">
                <span class="emoji">üé≤</span> –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å!
            </button>
            <button id="copy-btn">
                <span class="emoji">üìã</span> –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å
            </button>
            <button id="show-words-btn">
                <span class="emoji">üîç</span> –ü–æ–∫–∞–∑–∞—Ç—å —Å–ª–æ–≤–∞
            </button>
        </div>
        
        <div class="stats">
            –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ: <span id="counter">0</span> –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π | 
            –í—Å–µ–≥–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π: <span id="total-combinations">810,000</span>
        </div>
        
        <div class="info">
            <p>‚ú® –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç pymorphy3 –¥–ª—è –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Å–∫–ª–æ–Ω–µ–Ω–∏—è —Å–ª–æ–≤</p>
        </div>
    </div>

    <script>
        // –≠–ª–µ–º–µ–Ω—Ç—ã
        const generateBtn = document.getElementById('generate-btn');
        const copyBtn = document.getElementById('copy-btn');
        const showWordsBtn = document.getElementById('show-words-btn');
        const sentenceEl = document.getElementById('sentence');
        const wordsEl = document.getElementById('words');
        const wordListEl = document.getElementById('word-list');
        const counterEl = document.getElementById('counter');
        const totalEl = document.getElementById('total-combinations');
        
        let showWords = false;
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
        async function generateSentence() {
            try {
                // –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
                sentenceEl.textContent = '–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º...';
                sentenceEl.style.opacity = '0.7';
                
                const response = await fetch('/generate');
                const data = await response.json();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
                sentenceEl.textContent = data.sentence;
                sentenceEl.style.opacity = '1';
                sentenceEl.classList.add('new-sentence');
                
                // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å –∞–Ω–∏–º–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –≤—Ä–µ–º—è
                setTimeout(() => {
                    sentenceEl.classList.remove('new-sentence');
                }, 500);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ª–æ–≤–∞
                wordListEl.innerHTML = `
                    –°—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ: <strong>${data.words.noun}</strong><br>
                    –ì–ª–∞–≥–æ–ª: <strong>${data.words.verb}</strong><br>
                    –ü—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω–æ–µ: <strong>${data.words.adjective}</strong><br>
                    –ú–µ—Å—Ç–æ: <strong>${data.words.place}</strong>
                `;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á—ë—Ç—á–∏–∫
                counterEl.textContent = data.stats.total;
                totalEl.textContent = data.stats.combinations.toLocaleString();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–æ–≤–∞ –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ
                wordsEl.style.display = showWords ? 'block' : 'none';
                
            } catch (error) {
                sentenceEl.textContent = '–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ üò¢';
                console.error('–û—à–∏–±–∫–∞:', error);
            }
        }
        
        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
        function copyToClipboard() {
            const text = sentenceEl.textContent;
            navigator.clipboard.writeText(text).then(() => {
                // –ê–Ω–∏–º–∞—Ü–∏—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
                const originalText = copyBtn.innerHTML;
                copyBtn.innerHTML = '<span class="emoji">‚úÖ</span> –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
                copyBtn.style.background = 'linear-gradient(to right, #4CAF50, #2E7D32)';
                
                setTimeout(() => {
                    copyBtn.innerHTML = originalText;
                    copyBtn.style.background = 'linear-gradient(to right, #f093fb, #f5576c)';
                }, 2000);
            });
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å —Å–ª–æ–≤–∞
        function toggleWords() {
            showWords = !showWords;
            wordsEl.style.display = showWords ? 'block' : 'none';
            showWordsBtn.innerHTML = showWords 
                ? '<span class="emoji">üëÅÔ∏è</span> –°–∫—Ä—ã—Ç—å —Å–ª–æ–≤–∞' 
                : '<span class="emoji">üîç</span> –ü–æ–∫–∞–∑–∞—Ç—å —Å–ª–æ–≤–∞';
        }
        
        // –°–æ–±—ã—Ç–∏—è
        generateBtn.addEventListener('click', generateSentence);
        copyBtn.addEventListener('click', copyToClipboard);
        showWordsBtn.addEventListener('click', toggleWords);
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            // –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã
            setTimeout(generateSentence, 300);
            
            // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π
            fetch('/generate')
                .then(res => res.json())
                .then(data => {
                    totalEl.textContent = data.stats.combinations.toLocaleString();
                });
        });
        
        // –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' || e.code === 'Enter') {
                e.preventDefault();
                generateSentence();
            }
            if (e.code === 'KeyC' && (e.ctrlKey || e.metaKey)) {
                e.preventDefault();
                copyToClipboard();
            }
        });
    </script>
</body>
</html>